<div class="btn-toolbar">
    <div class="well inline-form">
        <div class="row-fluid">
            <div class="span12">
                <div class="control-group">
                    <input type="text" class="input-small" data-bind="value: serial, attr: { placeholder: locales.txtDocummentSerial }">
                    <input type="text" class="input-small" data-bind="value: externalSerial, attr: { placeholder: locales.txtExternalId }">
                    <select class="span3" data-bind="options: departmentList, optionsText: 'Name', value: selectedDepartment, optionsCaption: locales.lstDepartmentsCaption">
                    </select>
                    <select class="span3" data-bind="options: registryList, optionsText: 'Name', value: selectedregistry, optionsCaption: locales.lstRegistryCaption">
                    </select>
                    <select class="span2" data-bind="options: documentStatusList, optionsText: 'Name', value: selectedStatus, optionsCaption: locales.lstDocumentStatusCaption">
                    </select>
                </div>
            </div>
        </div>
        
        <div class="row-fluid">
            <div class="span12">
                <div class="control-group">
                    <span class="control-label">من</span>
                    <input type="text" class="datepicker" placeholder="من تاريخ" data-bind="datepicker: fromDate, attr: { placeholder: locales.lblFromDate }">
                    <span class="control-label">الى</span>
                    <input type="text" class="datepicker" placeholder="الى تاريخ" data-bind="datepicker: toDate, attr: { placeholder: locales.lblToDate }">
                    <button type="button" class="btn" data-bind="click: search" style="margin-top: -7px;">
                        <span data-bind="text: locales.btnSearch"></span><i class="icon-search" style="vertical-align: text-bottom;"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="row-fluid">
            <div class="span12">
                <div class="btn-group">
                    <button class="btn" data-bind="click: showAllDocuments, css: { active: showOption() == null }">
                        <span style="margin-left: 5px;" data-bind="text: locales.btnAllDocuments"></span>
                        (<span data-bind="text: allDocumentsCount"></span>)
                    </button>
                    <button class="btn btn-danger" data-bind="click: showLateDocuments, css: { active: showOption() == 'late' }">
                        <span style="margin-left: 5px;" data-bind="text: locales.btnLateDocuments"></span>
                        (<span data-bind="text: lateDocumentsCount"></span>)
                    </button>
                    <button class="btn btn-warning" data-bind="click: showTodayDocuments, css: { active: showOption() == 'today' }">
                        <span style="margin-left: 5px;" data-bind="text: locales.btnTodayDocuments"></span>
                        (<span data-bind="text: todayDocumentsCount"></span>)
                    </button>
                    <button class="btn btn-success" data-bind="click: showTomorrowDocuments, css: { active: showOption() == 'tomorrow' }">
                        <span style="margin-left: 5px;" data-bind="text: locales.btnTomorrowDocuments"></span>
                        (<span data-bind="text: tomorrowDocumentsCount"></span>)
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="well" id="documentList">
    <table class="table">
        <thead>
            <tr>
                <th data-bind="text: locales.tblDocumentSerial"></th>
                <th data-bind="text: locales.tblExternalId"></th>
                <th data-bind="text: locales.tblDocumentDate"></th>
                <th data-bind="text: locales.tblRegistry"></th>
                <th data-bind="text: locales.tblDestination"></th>
                <th data-bind="text: locales.tblIssue"></th>
                <th style="background-color: #e0eaf0;" data-bind="text: locales.tblStatus"></th>
                <th style="background-color: #e0eaf0;"></th>
                <th></th>
            </tr>
        </thead>
        <tbody data-bind="foreach: documentList">
            <tr data-bind="css: LateCssClass()">
                <td data-bind="text: Serial"></td>
                <td data-bind="text: ExternalId"></td>
                <td data-bind="date: Date"></td>
                <td data-bind="text: Registry().Name"></td>
                <td data-bind="text: Department().Name"></td>
                <td data-bind="text: Issue().Name"></td>
                <td style="background-color: #e0eaf0;">
                    <span class="label" data-bind="text: DocumentStatus().Name, css: StatusCssClass()"></span>
                </td>
                <td style="background-color: #ECF1F5; width: 150px;">

                    <div class="btn-group">
                        <!-- ko if: DocumentStatusId() != 2 &&  DocumentStatusId() != 9 &&  DocumentStatusId() != 7 && $root.userRoles.indexOf(3) != -1-->
                        <a class="btn" data-toggle="modal" href="#transferDocumentModal" data-bind="click: $root.opentransferDocumentModal, attr: { title: $root.locales.lnkTransfer }"><i class="icon-share-alt" style="margin-top: 2px;"></i></a>
                        
                        <!-- /ko -->
                        <!-- ko if: DocumentStatusId() != 2 &&  DocumentStatusId() != 9 &&  DocumentStatusId() != 7 && $root.userRoles.indexOf(6) != -1-->
                        <a class="btn btn-warning" data-toggle="modal" href="#transferDocumentModalManager" data-bind="click: $root.opentransferDocumentModal, attr: { title: $root.locales.lnkTransfer }"><i class="icon-share-alt" style="margin-top: 2px;"></i></a>
                        <!-- /ko -->
                        <!-- ko if: DocumentStatusId() != 7 && DocumentStatusId() != 9 && DocumentStatusId() != 2-->
                        <button class="btn dropdown-toggle" data-toggle="dropdown">
                            <span data-bind="text: $root.locales.lnkActions"></span>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <!-- ko if: DocumentStatusId() == 1 || DocumentStatusId() == 3-->
                            <li>
                                <a href="#" data-bind="click: $root.changeStatus.bind($data, 5), text: $root.locales.lnkOpen">مفتوح</a>
                            </li>
                            <!-- /ko -->
                            <!-- ko if: DocumentStatusId() == 5-->
                            <li>
                                <a href="#" data-bind="click: $root.changeStatus.bind($data, 7), text: $root.locales.lnkFinished">منجز</a>
                            </li>
                            <li>
                                <a href="#" data-bind="click: $root.changeStatus.bind($data, 8), text: $root.locales.lnkPending">معلق</a>
                            </li>
                            <li>
                                <a href="#" data-bind="click: $root.changeStatus.bind($data, 9), text: $root.locales.lnkClosed">مغلق</a>
                            </li>
                            <!-- /ko -->
                            <!-- ko if: DocumentStatusId() == 8 || DocumentStatusId() == 4-->
                            <li>
                                <a href="#" data-bind="click: $root.changeStatus.bind($data, 5), text: $root.locales.lnkOpen">مفتوح</a>
                            </li>
                            <li>
                                <a href="#" data-bind="click: $root.changeStatus.bind($data, 7), text: $root.locales.lnkFinished">منجز</a>
                            </li>
                            <li>
                                <a href="#" data-bind="click: $root.changeStatus.bind($data, 9), text: $root.locales.lnkClosed">مغلق</a>
                            </li>
                            <!-- /ko -->
                        </ul>
                        <!-- /ko -->
                    </div>
                </td>
                <td style="width: 150px;">
                    <div class="btn-group">
                        <a class="btn" data-bind="click: $root.openDocumentView, attr: { title: $root.locales.btnViewDocument }"><i class="icon-eye-open" style="margin-top: 2px;"></i></a>
                        <a class="btn" data-toggle="modal" href="#modalHistoryDocument" data-bind="click: $root.openDocumentHistory, attr: { title: $root.locales.btnDocumentHistory }"><i class="icon-list" style="margin-top: 2px;"></i></a>
                        <a class="btn" data-toggle="modal" href="#modalHistoryDocument" data-bind="click: $root.openDocumentRelation, attr: { title: $root.locales.btnRelatedDocuments }"><i class="icon-resize-small" style="margin-top: 2px;"></i></a>
                        <a class="btn" data-bind="click: $root.openDocumentEdit, attr: { title: $root.locales.btnEditDocument }"><i class="icon-edit" style="margin-top: 2px;"></i></a>
                    </div>
                </td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="9">
                    <div class="pagination">
                        <ul data-bind="foreach: pagerList">
                            <li data-bind="css: { active: $root.currentPageIndex() == index }"><a id="test" href="#" data-bind="    text: text, click: $root.pageIndexChanged"></a></li>
                        </ul>
                    </div>
                </td>
            </tr>
        </tfoot>
    </table>
</div>
<div class="modal hide fade" id="transferDocumentModal" style="width: 650px;">
    <div class="modal-header">
        <button id="closeTransferDocument" type="button" class="close" data-dismiss="modal">x</button>
        <h3><i class="icon-user" style="vertical-align: baseline; margin-left: 5px;"></i>
            <span data-bind="text: locales.modalTransferDocumentTitle"></span>
            <span> - الرقم الموحد:  </span><span data-bind="text: uniqenumber"></span>
        </h3>
    </div>
    <div class="modal-body">
        <div class="row-fluid">
            <div class="span6 ">
                <div class="control-group" data-bind="css: { 'error': selectedDepartment() == null }">
                    <select class="span3" data-bind="options: departmentList, optionsText: 'Name', value: selectedDepartment, optionsCaption: locales.lstTransferDepartmentCaption, event: { change: getSuer }">
                    </select>
                    <div class="control-group" data-bind="css: { 'error': selectedDepartmentUser() == null }">
                        <select class="span3" data-bind="options: departmentUsersList, optionsText: 'Name', value: selectedDepartmentUser, optionsCaption: locales.lstDepartmentUsersCaption">
                        </select>
                    </div>
                </div>
            </div>
            <div class="span6 ">
                <textarea data-bind="value: transferNotes, attr: { placeholder: locales.txtNotes }" style="width: 98%; height: 55px;"></textarea>
            </div>
        </div>

        <div class="row-fluid" data-bind="style: { display: reasons().length > 0 ? 'block' : 'none' }">
            <div class="span12 ">
                <div class="control-group">
                    <select class="span3" data-bind="options: reasons, optionsText: 'Reason', value: selectedReason, optionsCaption: locales.lstReasonsCaption">
                    </select>
                </div>
            </div>
        </div>
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-parent="#accordion2" data-bind="text: locales.lblRequiredProcedures">
                </a>
            </div>
            <div id="divReadOnly" class="accordion-body expand">
                <div class="accordion-inner">
                    <div class="row-fluid">
                        <div class="span12 ">
                            <div>
                                <select id="ProcedureList" data-bind="options: internalProcedureList, optionsText: 'Name', optionsValue: 'Id', optionsCaption: locales.lstProceduresCaption"></select>
                                <button type="button" class="btn" style="margin-top: -10px;" data-bind="click: addProcedure"><i class="icon-plus"></i></button>
                            </div>
                            <div style="height: 180px; padding: 5px; overflow-y: auto; border: 1px solid #dddddd; background-color: #fff;" data-bind="foreach: documentProcedure">
                                <div class="rounded" style="margin-bottom: 4px;">
                                    <span data-bind="text: Procedure().Name"></span>
                                    <span class="left-close" data-bind="click: $root.removeProcedure">
                                        <i class="icon-remove"></i>
                                    </span>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-success" data-bind="click: saveTransferDocument, text: locales.btnSaveTransfer"><i class="icon-ok icon-white" style="vertical-align: text-bottom"></i></button>
    </div>
</div>
<div class="modal hide fade" id="transferDocumentModalManager" style="width: 650px;">
    <div class="modal-header">
        <button id="Button1" type="button" class="close" data-dismiss="modal">x</button>
        <h3><i class="icon-user" style="vertical-align: baseline; margin-left: 5px;"></i>
            <span data-bind="text: locales.modalTransferDocumentTitle"></span>
            <span> - الرقم الموحد:  </span><span data-bind="text: uniqenumber"></span>
        </h3>
    </div>
    <div class="modal-body">
        <div class="row-fluid">
            <div class="span6 ">
                <div class="control-group" data-bind="css: { 'error': selectedDepartment() == null }">
                    <select class="span3" data-bind="options: departmentList, optionsText: 'Name', value: selectedDepartment, optionsCaption: locales.lstTransferDepartmentCaption, event: { change: getManagerSuer }">
                    </select>
                    <div class="control-group" data-bind="css: { 'error': selectedDepartmentUser() == null }">
                        <select class="span3" data-bind="options: departmentUsersList, optionsText: 'Name', value: selectedDepartmentUser, optionsCaption: locales.lstDepartmentUsersCaption">
                        </select>
                    </div>
                </div>
            </div>
            <div class="span6 ">
                <textarea data-bind="value: transferNotes, attr: { placeholder: locales.txtNotes }" style="width: 98%; height: 55px;"></textarea>
            </div>
        </div>

        <div class="row-fluid" data-bind="style: { display: reasons().length > 0 ? 'block' : 'none' }">
            <div class="span12 ">
                <div class="control-group">
                    <select class="span3" data-bind="options: reasons, optionsText: 'Reason', value: selectedReason, optionsCaption: locales.lstReasonsCaption">
                    </select>
                </div>
            </div>
        </div>
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-parent="#accordion2" data-bind="text: locales.lblRequiredProcedures">
                </a>
            </div>
            <div id="div2" class="accordion-body expand">
                <div class="accordion-inner">
                    <div class="row-fluid">
                        <div class="span12 ">
                            <div>
                                <select id="Select1" data-bind="options: internalProcedureList, optionsText: 'Name', optionsValue: 'Id', optionsCaption: locales.lstProceduresCaption"></select>
                                <button type="button" class="btn" style="margin-top: -10px;" data-bind="click: addProcedure"><i class="icon-plus"></i></button>
                            </div>
                            <div style="height: 180px; padding: 5px; overflow-y: auto; border: 1px solid #dddddd; background-color: #fff;" data-bind="foreach: documentProcedure">
                                <div class="rounded" style="margin-bottom: 4px;">
                                    <span data-bind="text: Procedure().Name"></span>
                                    <span class="left-close" data-bind="click: $root.removeProcedure">
                                        <i class="icon-remove"></i>
                                    </span>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-success" data-bind="click: saveTransferDocument, text: locales.btnSaveTransfer"><i class="icon-ok icon-white" style="vertical-align: text-bottom"></i></button>
    </div>
</div>
<a id="openChangeStatusModal" data-toggle="modal" href="#modalChangeStatus" style="display: none;"></a>
<a id="openProcedureStatusModel" data-toggle="modal" href="#modalChangeProcedureStatus" style="display: none;"></a>
<a id="openResponsesModal" data-toggle="modal" href="#modalAddResponse" style="display: none;"></a>
<div class="modal hide fade" id="modalChangeStatus" style="width: 650px;">
    <div class="modal-header">
        <button id="closeChangeStatus" type="button" class="close" data-dismiss="modal">x</button>
        <h3><i class="icon-user" style="vertical-align: baseline; margin-left: 5px;"></i><span data-bind="text: changeStatusTitle"></span></h3>
    </div>
    <div class="modal-body">
        <!-- ko if: haveReason() -->
    <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#divRason">الاسباب
                </a>
            </div>
            <div id="divRason" class="accordion-body collapse in">
                <div class="accordion-inner">
    <div class="modal-header">
        <button id="closeReason" type="button" class="close" data-dismiss="modal">x</button>
        <h3><i class="icon-user" style="vertical-align: baseline; margin-left: 5px;"></i><span data-bind="text: changeStatusTitle"></span></h3>
    </div>
    <div class="modal-body">
        <div class="row-fluid">
            <div class="span12 ">
                <div class="control-group" data-bind="css: { 'error': selectedReason() == null }">
                    <select class="span3" data-bind="options: reasons, optionsText: 'Reason', value: selectedReason, optionsCaption: locales.lstReasonsCaption">
                    </select>
                </div>
            </div>
        </div>
        
    </div>
                    </div>
                </div>
        </div>
        <!-- /ko -->
    <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#divProcedure">الاجراءات
                </a>
            </div>
            <div id="divProcedure" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="modal-body">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>الإجراء</th>
                                    <th>حالة الإجراء</th>
                                </tr>
                            </thead>
                            <tbody data-bind="foreach: documentProcedure">
                                <tr>
                                    <td data-bind="text: Procedure().Name"></td>

                                    <td>
                                        <div class="control-group" style="padding-right: 0px; margin-right: 0px; margin-left: 5px; margin-bottom: 0px;">
                                            <select class="span3" data-placeholder="Choose a Category" tabindex="1" data-bind="options: $parent.procedureStatus, optionsText: 'Name', optionsValue: 'Id', value: ProcedureStatusId">
                                            </select>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
                </div>
        </div>

    <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#divResponse">المشفوعات
                </a>
            </div>
            <div id="divResponse" class="accordion-body collapse">
                <div class="accordion-inner" style="overflow:auto;">
                    <table class="table" style="margin-bottom: 0px;">
                        <thead>
                            <tr>
                                <th>أنواع المشفوعات</th>
                                <th>عدد الورقات</th>
                                <th>ملاحظات</th>
                                <th>المرفقات</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody data-bind="foreach: attachmentLine">
                            <tr>
                                <td style="">
                                    <div class="control-group" data-bind="css: { error: !AttachmentTypeId.isValid() }"
                                        style="padding-right: 0px; margin-right: 0px; margin-left: 5px; margin-bottom: 0px;">
                                        <select class="span3" data-placeholder="Choose a Category" tabindex="1" data-bind="options: $parent.attchmentType, optionsText: 'Name', optionsValue: 'Id', value: AttachmentTypeId, optionsCaption: 'إختر...'">
                                        </select>
                                    </div>
                                </td>
                                <td style="">
                                    <div class="control-group" data-bind="css: { error: !Count.isValid() }"
                                        style="padding-right: 0px; margin-right: 0px; margin-left: 5px;">
                                        <input type="text" data-bind="value: Count">
                                    </div>
                                </td>
                                <td style="">
                                    <input type="text" data-bind="value: Notes"></td>
                                <td style="">
                                    <!-- ko if: !FileName.isValid() -->
                                    <div class="control-group" data-bind="css: { error: !FileName.isValid() }" style="padding-right: 0px; margin-right: 0px; margin-left: 5px; margin-bottom: 0px;">
                                        <form data-bind="attr: { name: 'uploadForm' + $index }">
                                            <input type="file" data-bind="attr: { name: 'uploadFile' + $index }, fileUpload: { property: 'FileName', url: '/api/Document/UploadFiles' }">
                                        </form>
                                    </div>
                                    <!-- /ko -->
                                    <!-- ko if: FileName.isValid() -->
                                    <a class="btn" href="#modalViewAttachment" data-toggle="modal" data-bind="click: $root.showAttachment" title="عرض"><i class="icon-eye-open" style="margin-top: 2px;"></i>
                                    </a>
                                    <!-- /ko -->
                                </td>
                                <td style=""><a data-bind="click: $parent.removeAttachmentLine" class="btn btn-danger"><i class="icon-remove icon-white" style="margin-top: 2px;"></i></a></td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td style=""><a class="btn green" data-bind="click: createAttachmentLine"><i class="icon-plus"></i>إضافة</a></td>
                                <td style=""></td>
                                <td style=""></td>
                                <td style=""></td>
                                <td style=""></td>
                                <td style=""></td>
                            </tr>
                        </tfoot>
                    </table>
                    </div>
                </div>
        </div>
        </div>
    <div class="modal-footer">
        <button class="btn btn-success" data-bind="click: saveChangedStatus, text: locales.btnSaveChangeStatus"><i class="icon-ok icon-white" style="vertical-align: text-bottom"></i></button>
    </div>
</div>
<div class="modal hide fade" id="modalHistoryDocument" style="width: 650px;">
    <div class="modal-header">
        <button type="button" class="close modalEditDocumentClose" id="closeModal" data-dismiss="modal">x</button>
        <h3><i class="icon-list" style="vertical-align: baseline; margin-left: 5px;"></i><span data-bind="text: locales.modalDocumentHistoryTitle"></span> [<span style="margin: 5px;" data-bind="    text: historyDocumentSerial"></span>]</h3>
    </div>
    <div class="modal-body" style="height: 400px; overflow-y: auto;">
        <!-- ko if: !isRelation()-->
        <div class="row-fluid">
            <div class="span6">
                <span data-bind="text: locales.lblDocumentCurrentUser"></span>
                <span class="label label-info" style="font-size: small" data-bind="text: documentCurrentUser"></span>
            </div>
            <div class="span6">
                <span data-bind="text: locales.lblDocumentExpiryDate"></span>
                <span class="label label-info" style="font-size: small" data-bind="date: documentExpiryDate"></span>
            </div>
        </div>
        <hr />
        <div class="tabbable">
            <ul class="nav nav-tabs">
                <li class="active"><a href="#tab1" data-toggle="tab" data-bind="text: locales.tabDocumentHistory"></a>
                </li>
                <li><a href="#tab2" data-toggle="tab" data-bind="text: locales.tabDocumentProcedures"></a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="tab1">
                    <table class="table">
                        <thead>
                            <tr>
                                <th data-bind="text: locales.tblDocumentStatus"></th>
                                <th data-bind="text: locales.tblStatusDate"></th>
                                <th data-bind="text: locales.tblStatusUser"></th>
                                <th data-bind="text: locales.tblStatusNotes"></th>
                            </tr>
                        </thead>
                        <tbody data-bind="foreach: historyDocument">
                            <tr>
                                <td data-bind="text: DocumentStatus().Name"></td>
                                <td data-bind="date: Date()"></td>
                                <td data-bind="text: User().Name"></td>
                                <td data-bind="text: Notes()"></td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="tab-pane" id="tab2">
                    <table class="table">
                        <thead>
                            <tr>
                                <th data-bind="text: locales.tblProcedureName"></th>
                                <th data-bind="text: locales.tblProcedureStatus"></th>
                            </tr>
                        </thead>
                        <tbody data-bind="foreach: documentProcedure">
                            <tr>
                                <td data-bind="text: Procedure().Name"></td>
                                <td>
                                    <div class="control-group" style="padding-right: 0px; margin-right: 0px; margin-left: 5px; margin-bottom: 0px;">
                                        <select class="span3" data-placeholder="Choose a Category" tabindex="1" data-bind="options: $parent.procedureStatus, optionsText: 'Name', optionsValue: 'Id', value: ProcedureStatusId" disabled="disabled">
                                        </select>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- /ko -->
        <!-- ko if: isRelation()-->
        <table class="table">
            <thead>
                <tr>
                    <th>رقم القيد</th>
                    <th>التاريخ</th>
                    <th>سجل القيد</th>
                    <th>رقم القيد الخارجى</th>
                    <th>جهة الصادر</th>
                    <th>الموضوع</th>
                    <th>الحاله</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: documentRelation">
                <tr>
                    <td data-bind="text: Serial"></td>
                    <td data-bind="date: Date"></td>
                    <td data-bind="text: Registry().Name"></td>
                    <td data-bind="text: ExternalId"></td>
                    <td data-bind="text: Department().Name"></td>
                    <td data-bind="text: Issue().Name"></td>
                    <td data-bind="text: DocumentStatus().Name"></td>


                </tr>
            </tbody>
        </table>
        <!-- /ko -->
    </div>
</div>
<div class="modal hide fade" id="modalChangeProcedureStatus" style="width: 650px;">
    <div class="modal-header">
        <button id="ProcedureClose" type="button" class="close" data-dismiss="modal">x</button>
        <h3><i class="icon-user" style="vertical-align: baseline; margin-left: 5px;"></i><span data-bind="text: changeStatusTitle"></span></h3>
    </div>
    <div class="modal-body">
        <table class="table">
            <thead>
                <tr>
                    <th>الإجراء</th>
                    <th>حالة الإجراء</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: documentProcedure">
                <tr>
                    <td data-bind="text: Procedure().Name"></td>

                    <td>
                        <div class="control-group" style="padding-right: 0px; margin-right: 0px; margin-left: 5px; margin-bottom: 0px;">
                            <select class="span3" data-placeholder="Choose a Category" tabindex="1" data-bind="options: $parent.procedureStatus, optionsText: 'Name', optionsValue: 'Id', value: ProcedureStatusId">
                            </select>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="modal-footer">
        <button class="btn btn-success" data-bind="click: saveChangedProcedureStatus">حفظ<i class="icon-ok icon-white" style="vertical-align: text-bottom"></i></button>
    </div>
</div>
<div class="modal hide fade" id="modalProcedureList" style="width: 650px;">
    <div class="modal-header">
        <button id="closeList" type="button" class="close" data-dismiss="modal">x</button>
        <h3><i class="icon-user" style="vertical-align: baseline; margin-left: 5px;"></i><span data-bind="text: changeStatusTitle"></span></h3>
    </div>
    <div class="modal-body">
        <table class="table">
            <thead>
                <tr>
                    <th>الإجراء</th>
                    <th>حالة الإجراء</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: documentProcedure">
                <tr>
                    <td data-bind="text: Procedure().Name"></td>
                    <td>
                        <div class="control-group" style="padding-right: 0px; margin-right: 0px; margin-left: 5px; margin-bottom: 0px;">
                            <select class="span3" data-placeholder="Choose a Category" tabindex="1" data-bind="options: $parent.procedureStatus, optionsText: 'Name', optionsValue: 'Id', value: ProcedureStatusId" disabled="disabled">
                            </select>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div class="modal hide fade" id="modalAddResponse" style="width: 650px;">
    <div class="modal-header">
        <button id="responseClose" type="button" class="close" data-dismiss="modal">x</button>
        <h3><i class="icon-user" style="vertical-align: baseline; margin-left: 5px;"></i><span>المشفوعات</span></h3>
    </div>
    <div class="modal-body">
        <table class="table" style="margin-bottom: 0px;">
                        <thead>
                            <tr>
                                <th>أنواع المشفوعات</th>
                                <th>عدد الورقات</th>
                                <th>ملاحظات</th>
                                <th>المرفقات</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody data-bind="foreach: attachmentLine">
                            <tr>
                                <td style="">
                                    <div class="control-group" data-bind="css: { error: !AttachmentTypeId.isValid() }"
                                        style="padding-right: 0px; margin-right: 0px; margin-left: 5px; margin-bottom: 0px;">
                                        <select class="span3" data-placeholder="Choose a Category" tabindex="1" data-bind="options: $parent.attchmentType, optionsText: 'Name', optionsValue: 'Id', value: AttachmentTypeId, optionsCaption: 'إختر...'">
                                        </select>
                                    </div>
                                </td>
                                <td style="">
                                    <div class="control-group" data-bind="css: { error: !Count.isValid() }"
                                        style="padding-right: 0px; margin-right: 0px; margin-left: 5px;">
                                        <input type="text" data-bind="value: Count">
                                    </div>
                                </td>
                                <td style="">
                                    <input type="text" data-bind="value: Notes"></td>
                                <td style="">
                                    <!-- ko if: !FileName.isValid() -->
                                    <div class="control-group" data-bind="css: { error: !FileName.isValid() }" style="padding-right: 0px; margin-right: 0px; margin-left: 5px; margin-bottom: 0px;">
                                        <form data-bind="attr: { name: 'uploadForm' + $index }">
                                            <input type="file" data-bind="attr: { name: 'uploadFile' + $index }, fileUpload: { property: 'FileName', url: '/api/Document/UploadFiles' }">
                                        </form>
                                    </div>
                                    <!-- /ko -->
                                    <!-- ko if: FileName.isValid() -->
                                    <a class="btn" href="#modalViewAttachment" data-toggle="modal" data-bind="click: $root.showAttachment" title="عرض"><i class="icon-eye-open" style="margin-top: 2px;"></i>
                                    </a>
                                    <!-- /ko -->
                                </td>
                                <td style=""><a data-bind="click: $parent.removeAttachmentLine" class="btn btn-danger"><i class="icon-remove icon-white" style="margin-top: 2px;"></i></a></td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td style=""><a class="btn green" data-bind="click: createAttachmentLine"><i class="icon-plus"></i>إضافة</a></td>
                                <td style=""></td>
                                <td style=""></td>
                                <td style=""></td>
                                <td style=""></td>
                                <td style=""></td>
                            </tr>
                        </tfoot>
                    </table>
    </div>
    <div class="modal-footer">
        <button class="btn btn-success" data-bind="click: saveChangedResponses">حفظ<i class="icon-ok icon-white" style="vertical-align: text-bottom"></i></button>
    </div>
</div>
