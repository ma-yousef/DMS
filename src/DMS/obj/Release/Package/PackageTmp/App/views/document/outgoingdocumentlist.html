<div class="btn-toolbar">
    <div class="well inline-form">
        <div class="row-fluid">
            <div class="span12">
                <div class="control-group">
                    <input type="text" class="input-small" placeholder="رقم القيد" data-bind="value: serial">
                    <input type="text" class="input-small" placeholder="رقم القيد الخارجى" data-bind="value: externalSerial">
                    <select class="span3" data-bind="options: departmentList, optionsText: 'Name', value: selectedDepartment, optionsCaption: 'اختر جهة الصادر...'">
                    </select>
                    <select class="span3" data-bind="options: registryList, optionsText: 'Name', value: selectedregistry, optionsCaption: 'اختر سجل ...'">
                    </select>
                    <select class="span2" data-bind="options: documentStatusList, optionsText: 'Name', value: selectedStatus, optionsCaption: 'الكل'">
                    </select>
                </div>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span12">
                <div class="control-group">
                    <span class="control-label">من</span>
                    <input type="text" class="input-meduim datepicker" placeholder="من" data-bind="datepicker: fromDate">
                    <span class="control-label">الى</span>
                    <input type="text" class="input-meduimdatepicker" placeholder="الى" data-bind="datepicker: toDate">
                    <button type="button" class="btn" data-bind="click: searchDocumnets" style="margin-top: -7px;">بحث<i class="icon-search" style="vertical-align: text-bottom;"></i></button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="well" id="documentList">
    <table class="table">
        <thead>
            <tr>
                <th>رقم القيد</th>
                <th>التاريخ</th>
                <th>سجل القيد</th>
                <th>رقم القيد الخارجى</th>
                <th>جهة الصادر</th>
                <th>الموضوع</th>
                <th></th>
                
                
            </tr>
        </thead>
        <tbody data-bind="foreach: documentList">
            <tr>
                <td data-bind="text: Serial"></td>
                <td data-bind="date: Date"></td>
                <td data-bind="text: Registry().Name"></td>
                <td data-bind="text: ExternalId"></td>
                <td data-bind="text: Department().Name"></td>
                <td data-bind="text: Issue().Name"></td>
                <td>
                    <div class="btn-group">
                        <a class="btn" data-bind="click: $root.openDocumentView" title="عرض"><i class="icon-eye-open" style="margin-top: 2px;"></i></a>
                        <a class="btn" data-toggle="modal" href="#modalHistoryDocument" data-bind="click: $root.openDocumentHistory" title="متابعة"><i class="icon-list" style="margin-top: 2px;"></i></a>
                        <a class="btn" data-toggle="modal" href="#modalHistoryDocument" data-bind="click: $root.openDocumentRelation" title="الربط"><i class="icon-resize-small" style="margin-top: 2px;"></i></a>
                        <a class="btn" data-bind="click: $root.openDocumentEdit" title="تعديل"><i class="icon-edit" style="margin-top: 2px;"></i></a>
                    </div>
                </td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="9">
                    <div class="pagination">
                        <ul data-bind="foreach: pagerList">
                            <li><a href="#" data-bind="text: text, click: $root.pageIndexChanged"></a></li>
                        </ul>
                    </div>
                </td>
            </tr>
        </tfoot>
    </table>
</div>
<div class="modal hide fade" id="transferDocumentModal" style="width: 650px;">
    <div class="modal-header">
        <button id="closeTransferDocument" type="button" class="close" data-dismiss="modal">x</button>
        <h3><i class="icon-user" style="vertical-align: baseline; margin-left: 5px;"></i>احالة قيد</h3>
    </div>
    <div class="modal-body">
        <div class="row-fluid">
            <div class="span12 ">
                <div class="control-group" data-bind="css: { 'error': selectedDepartmentUser() == null }">
                    <select class="span3" data-bind="options: departmentUsersList, optionsText: 'Name', value: selectedDepartmentUser, optionsCaption: 'اختر موظف...'">
                    </select>
                </div>
            </div>
        </div>
        <div class="row-fluid" data-bind="style: { display: reasons().length > 0 ? 'block': 'none' }">
            <div class="span12 ">
                <div class="control-group">
                    <select class="span3" data-bind="options: reasons, optionsText: 'Reason', value: selectedReason, optionsCaption: 'اختر سبب...'">
                    </select>
                </div>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span12 ">
                <div class="control-group">
                    <textarea data-bind="value: transferNotes" placeholder="ملاحظات"></textarea>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-success" data-bind="click: saveTransferDocument">حفظ<i class="icon-ok icon-white" style="vertical-align: text-bottom"></i></button>
    </div>
</div>
<a id="openChangeStatusModal" data-toggle="modal" href="#modalChangeStatus" style="display: none;"></a>
<div class="modal hide fade" id="modalChangeStatus" style="width: 650px;">
    <div class="modal-header">
        <button id="closeReason" type="button" class="close" data-dismiss="modal">x</button>
        <h3><i class="icon-user" style="vertical-align: baseline; margin-left: 5px;"></i><span data-bind="text: changeStatusTitle"></span></h3>
    </div>
    <div class="modal-body">
        <div class="row-fluid">
            <div class="span12 ">
                <div class="control-group" data-bind="css: { 'error': selectedReason() == null }">
                    <select class="span3" data-bind="options: reasons, optionsText: 'Reason', value: selectedReason, optionsCaption: 'اختر سبب...'">
                    </select>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-success" data-bind="click: saveChangedStatus">حفظ<i class="icon-ok icon-white" style="vertical-align: text-bottom"></i></button>
    </div>
</div>

<div class="modal hide fade" id="modalHistoryDocument" style="width: 650px; height: 300px;">
    <div class="modal-header">
        <button type="button" class="modalEditDocumentClose" id="closeModal" data-dismiss="modal">x</button>
        <h3><i class="icon-user" style="vertical-align: baseline; margin-left: 5px;"></i>الربط بموضوع</h3>
    </div>
    <div class="modal-body">
        <div class="btn-toolbar">
            <div class="well form-inline">
                <!-- ko if: !isRelation()-->
                <table class="table">
                    <thead>
                        <tr>
                            <th>حالة الوثيقة</th>
                            <th>التاريخ</th>
                            <th>الشرح</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: historyDocument">
                        <tr>
                            <td data-bind="text: DocumentStatus().Name"></td>
                            <td data-bind="date: Date()"></td>
                            <td data-bind="text: Notes()"></td>


                        </tr>
                    </tbody>
                </table>
                <!-- /ko -->
                <!-- ko if: isRelation()-->
                <table class="table">
                    <thead>
                        <tr>
                             <th>رقم القيد</th>
                             <th>التاريخ</th>
                             <th>سجل القيد</th>
                             <th>رقم القيد الخارجى</th>
                             <th>جهة الصادر</th>
                             <th>الموضوع</th>
                             <th>الحاله</th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: documentRelation">
                        <tr>
                            <td data-bind="text: Serial"></td>
                            <td data-bind="date: Date"></td>
                            <td data-bind="text: Registry().Name"></td>
                            <td data-bind="text: ExternalId"></td>
                            <td data-bind="text: Department().Name"></td>
                            <td data-bind="text: Issue().Name"></td>
                            <td data-bind="text: DocumentStatus().Name"></td>


                        </tr>
                    </tbody>
                </table>
                <!-- /ko -->
            </div>
        </div>
    </div>

</div>
